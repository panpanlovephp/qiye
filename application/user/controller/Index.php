<?phpnamespace app\user\controller;use think\Db;use think\Loader;use think\Request;use Overtrue\ChineseCalendar\Calendar;use think\Session;use think\Url;class Index extends Com{    public function __construct()    {        parent::__construct();        header('Content-type:text/html;charset=utf-8');        Url::root('/index.php');        $apple =  Db::name('Config')->Field('names,value',true)->select();        foreach($apple as $list){            $ls[$list['names']]= $list['value'];        }        $this->assign('ls',$ls);    }    public function index()    {        $this->assign('banner',Db::name('Banner')->where('id',1)->find());        $this->assign('news',Db::name('Product')->where('sid',9)->where('isfalse',1)->order('id desc')->limit(8)->select());        $this->assign('ggao',Db::name('Product')->where('sid',10)->where('isfalse',1)->order('id desc')->limit(8)->select());        $this->assign('vip',Db::name('Product')->where('sid',15)->where('isfalse',1)->order('id desc')->limit(5)->select());        $this->assign('zdu',Db::name('Product')->where('sid',7)->where('isfalse',1)->order('id desc')->limit(7)->select());        $this->assign('pro',Db::name('Product')->where('sid',8)->where('isfalse',1)->order('id desc')->limit(6)->select());        $this->assign('hd',Db::name('Product')->where('sid',31)->where('isfalse',1)->order('id desc')->limit(3)->select());        $this->assign('sp',Db::name('Product')->where('id',7)->find());        $this->assign('recommend',getInfo(Db::name('Area')->where('sort',0)->find()));        $this->assign('host',getInfo(Db::name('Area')->where('sort',2)->find()));        $data = getHost(Db::name('Area')->where('sort',2)->find());        $this->assign('content',$data[0]['content']);        $this->assign('hostInfo',getHostInfo(Db::name('Area')->where('sort',3)->find()));        $data = getHost(Db::name('Area')->where('sort',3)->find());        $this->assign('title',$data[0]['title']);        $this->assign('hostFea',getHostFea(Db::name('Area')->where('sort',4)->find()));        $data = getHostFea(Db::name('Area')->where('sort',4)->find());        $this->assign('feaTitle',$data[0]['title']);        $this->assign('js',Db::name('Area')->where('id',1)->find());        $this->assign('hyjs',Db::name('Area')->where('id',8)->find());        $this->assign('hz',Db::name('Area')->where('id',6)->find());        $this->assign('cateTree',model('Category')->getfl());        return $this->fetch();    }    public function about(){        $id = intval(input('id'));        if(!$id){            $id = 1;        }else{            $id = input('id');        }        $result = Db::name('Area')->where('id',$id)->find();        $this->assign('data',$result);        $about = Db::name('Area')->where('pid',1)->select();        $this->assign('pt',$about);        $this->assign('id',$id);        return $this->fetch();    }    public function contact()    {        $result = Db::name('Area')->where('id',7)->find();        $this->assign('data',$result);        return $this->fetch();    }    /**     * 新闻资讯     * @return mixed     */    public function news()    {        if(input('id')==''){            $id = 9;        }else{            $id = input('id');        }        $data =  model('News')->search(8,$id);        $this->assign('data',$data);        $pt = Db::name('Category')->where('parent_id',4)->select();        $this->assign('pt',$pt);        $this->assign('id',$id);        return $this->fetch();    }    /**     * 关于我们     */    public function newsxq()    {        $id = intval(input('id'));        if (!$id) {            $this->error('非法参数');        }        $data = Db::name('Product')->where('id',$id)->find();        $this->assign('data',$data);        $pt = Db::name('Category')->where('parent_id',4)->select();        $this->assign('pt',$pt);        return $this->fetch();    }    public function product()    {        if(input('id')==''){            $id = 8;        }else{            $id = input('id');        }        $data =  model('Product')->search(9,$id);        $this->assign('data',$data);        $pt = Db::name('Category')->where('parent_id',6)->select();        $this->assign('pt',$pt);        $this->assign('id',$id);        return $this->fetch();    }    public function proxq()    {        $id = intval(input('id'));        if (!$id) {            $this->error('非法参数');        }        $data = Db::name('Product')->where('id',$id)->find();        $this->assign('data',$data);        $pt = Db::name('Category')->where('parent_id',6)->select();        $this->assign('pt',$pt);        return $this->fetch();    }    public function vip()    {        if(input('id')==''){            $id = 15;        }else{            $id = input('id');        }        $data =  model('Product')->search(9,$id);        $this->assign('data',$data);        $pt = Db::name('Category')->where('parent_id',13)->select();        $this->assign('pt',$pt);        $this->assign('id',$id);        return $this->fetch();    }    public function vipxq()    {        $id = intval(input('id'));        if (!$id) {            $this->error('非法参数');        }        $data = Db::name('Product')->where('id',$id)->find();        $this->assign('data',$data);        $pt = Db::name('Category')->where('parent_id',13)->select();        $this->assign('pt',$pt);        return $this->fetch();    }    public function message()    {        if(Request::instance()->isPost())        {            $m = model('Message');            $data = input('post.');            $result = $m->addData($data);            exit(json_encode($result));        }        return $this->fetch();    }}